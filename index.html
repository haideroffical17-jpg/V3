<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Creator Studio - Bulk Video Generator</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body {
            background-color: #0f172a; 
            color: white;
            font-family: 'Inter', sans-serif;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Icons = {
            Video: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>,
            ArrowRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="5" x2="19" y1="12" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
            Play: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
            Pause: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>,
            Download: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
            Loader2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>,
            Home: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            Trash2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            Type: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" x2="15" y1="20" y2="20"/><line x1="12" x2="12" y1="4" y2="20"/></svg>,
            Layers: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>
        };

        function App() {
            const [currentView, setCurrentView] = useState('home');

            return (
                <div className="min-h-screen flex flex-col items-center">
                    {currentView === 'home' && <HomePage onNavigate={setCurrentView} />}
                    {currentView === 'video' && <VideoGenerator onBack={() => setCurrentView('home')} />}
                </div>
            );
        }

        function HomePage({ onNavigate }) {
            return (
                <div className="w-full max-w-6xl px-4 py-12 flex flex-col items-center animate-fade-in min-h-screen justify-center">
                    <div className="bg-slate-800/50 border border-slate-700 rounded-full px-6 py-2 mb-6">
                        <span className="text-blue-400 text-xs font-bold tracking-widest uppercase">POWERED BY GROW WITH HAIDER</span>
                    </div>

                    <h1 className="text-5xl md:text-6xl font-extrabold text-center mb-4 tracking-tight">
                        AI Creator Studio
                    </h1>
                    <p className="text-slate-400 text-lg mb-16">Professional Tools Suite</p>

                    <div className="w-full max-w-md">
                        <div className="group relative bg-slate-800/40 border border-slate-700 rounded-3xl p-8 hover:bg-slate-800/60 transition-all hover:border-blue-500/30 cursor-pointer flex flex-col justify-between shadow-2xl" onClick={() => onNavigate('video')}>
                            <div>
                                <div className="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-blue-500/20 group-hover:scale-110 transition-transform">
                                    <Icons.Video className="w-8 h-8 text-white" />
                                </div>
                                <h3 className="text-2xl font-bold mb-3">Bulk Video Generator</h3>
                                <p className="text-slate-400 mb-6">Create unlimited videos from text. Ultra HD Flux Quality. Direct Download.</p>
                            </div>
                            <div className="flex items-center gap-2 text-blue-400 font-semibold group-hover:gap-3 transition-all">
                                Open Tool <Icons.ArrowRight className="w-4 h-4" />
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function VideoGenerator({ onBack }) {
            const [prompts, setPrompts] = useState('');
            const [scenes, setScenes] = useState([]); 
            const [currentSceneIndex, setCurrentSceneIndex] = useState(0);
            const [isPlaying, setIsPlaying] = useState(false);
            const [isRendering, setIsRendering] = useState(false); 
            const [aspectRatio, setAspectRatio] = useState('16:9');
            const [cameraMove, setCameraMove] = useState('cinematic'); 
            const [isLoading, setIsLoading] = useState(false);
            const [showCaptions, setShowCaptions] = useState(false);
            const [generatedCount, setGeneratedCount] = useState(0);
            
            const [clipDuration, setClipDuration] = useState(5); 
            const [progress, setProgress] = useState(0); 
            
            const canvasRef = useRef(null);
            const mediaRecorderRef = useRef(null);
            const recordedChunks = useRef([]);
            const imageCache = useRef({});
            const requestRef = useRef(null);

            // Preload Images
            useEffect(() => {
                scenes.forEach(scene => {
                    if (!scene.image) return;
                    const img = new Image();
                    img.crossOrigin = "anonymous"; 
                    img.src = scene.image;
                    img.onerror = () => {
                        console.error(`Failed to load image for scene: ${scene.text}`);
                    };
                    imageCache.current[scene.id] = img;
                });
            }, [scenes]);

            // Animation Logic
            const animateCanvas = () => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                
                let width = 1920; let height = 1080;
                if (aspectRatio === '9:16') { width = 1080; height = 1920; }
                if (aspectRatio === '1:1') { width = 1080; height = 1080; }
                
                if (canvas.width !== width) canvas.width = width;
                if (canvas.height !== height) canvas.height = height;

                ctx.fillStyle = '#0f172a'; ctx.fillRect(0, 0, width, height);

                const scene = scenes[currentSceneIndex];
                if (!scene) return;

                const img = imageCache.current[scene.id];
                
                // Broken/Loading Check
                if (!img || !img.complete || img.naturalWidth === 0) {
                    ctx.fillStyle = '#ffffff'; 
                    ctx.font = '30px Inter';
                    ctx.textAlign = 'center';
                    ctx.fillText("Loading Scene...", width/2, height/2);
                    return; 
                }

                const p = progress / 100;
                let scale = 1; let tx = 0; let ty = 0;

                switch (scene.movement) {
                    case 'zoomIn': scale = 1 + (p * 0.3); break;
                    case 'panLeft': scale = 1.2; tx = (width * 0.05) - (p * width * 0.1); break;
                    case 'shake': scale = 1.1; const s = Math.sin(p * 40) * 15; tx = s; ty = s; break;
                    case 'cinematic': default: scale = 1 + (p * 0.15); tx = -(p * width * 0.02); ty = -(p * height * 0.02); break;
                }

                ctx.save();
                ctx.translate(width / 2, height / 2);
                ctx.scale(scale, scale);
                ctx.translate(-width / 2 + tx, -height / 2 + ty);
                
                const imgRatio = img.width / img.height;
                const canvasRatio = width / height;
                let renderW, renderH;
                
                if (canvasRatio > imgRatio) { renderW = width; renderH = width / imgRatio; } 
                else { renderH = height; renderW = height * imgRatio; }
                
                // High Quality Smoothing
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';
                
                ctx.drawImage(img, (width - renderW) / 2, (height - renderH) / 2, renderW, renderH);
                ctx.restore();

                if (showCaptions) {
                    ctx.fillStyle = 'rgba(0,0,0,0.6)';
                    ctx.fillRect(0, height - 160, width, 160);
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 48px Inter';
                    ctx.textAlign = 'center';
                    ctx.shadowColor = "black";
                    ctx.shadowBlur = 20;
                    ctx.fillText(scene.text, width/2, height - 70);
                }
            };

            useEffect(() => {
                const loop = () => { animateCanvas(); requestRef.current = requestAnimationFrame(loop); };
                requestRef.current = requestAnimationFrame(loop);
                return () => cancelAnimationFrame(requestRef.current);
            }, [currentSceneIndex, progress, scenes, showCaptions, aspectRatio]);

            useEffect(() => {
                let interval;
                if ((isPlaying || isRendering) && scenes.length > 0) {
                    const fps = 60; const stepTime = 1000 / fps; const totalSteps = (clipDuration * 1000) / stepTime;
                    interval = setInterval(() => {
                        setProgress((old) => {
                            const newProgress = old + (100 / totalSteps);
                            if (newProgress >= 100) {
                                if (currentSceneIndex < scenes.length - 1) {
                                    setCurrentSceneIndex(prev => prev + 1);
                                    return 0; 
                                } else {
                                    if (isRendering) stopRendering();
                                    setIsPlaying(false); 
                                    return 100;
                                }
                            }
                            return newProgress;
                        });
                    }, stepTime);
                }
                return () => clearInterval(interval);
            }, [isPlaying, isRendering, currentSceneIndex, scenes.length, clipDuration]);

            // --- GENERATE IMAGE (ULTRA HD) ---
            const generateImage = async (prompt, seed) => {
                // Requested Higher Resolutions
                let width, height;
                if (aspectRatio === '9:16') { 
                    width = 1080; height = 1920; // Full HD Vertical
                } else if (aspectRatio === '1:1') { 
                    width = 1280; height = 1280; // High Res Square
                } else { 
                    width = 1920; height = 1080; // Full HD Landscape
                }
                
                // Flux "Realism" Endpoint - NO ENHANCE (Raw is sharper)
                const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?width=${width}&height=${height}&model=flux&seed=${seed}&nologo=true`;
                
                const response = await fetch(url);
                if (!response.ok) throw new Error('Generation failed');
                const blob = await response.blob();
                return URL.createObjectURL(blob);
            };

            // --- BATCHED GENERATION (Smart Queue) ---
            const handleGenerate = async () => {
                setIsLoading(true);
                setIsPlaying(false);
                const lines = prompts.split('\n').filter(line => line.trim() !== '');
                if (lines.length === 0) return;

                setGeneratedCount(0);
                const BATCH_SIZE = 3; 
                
                for (let i = 0; i < lines.length; i += BATCH_SIZE) {
                    const batch = lines.slice(i, i + BATCH_SIZE);
                    const batchPromises = batch.map(async (line, batchIdx) => {
                        try {
                            const seed = Math.floor(Math.random() * 1000000);
                            // Magic Prompts for Realism
                            const enhancedPrompt = `Raw photo of ${line}, 8k uhd, dslr, soft lighting, high quality, film grain, Fujifilm XT3`;
                            const imageUrl = await generateImage(enhancedPrompt, seed);
                            
                            return {
                                image: imageUrl,
                                text: line,
                                id: Date.now() + i + batchIdx + Math.random(),
                                movement: cameraMove,
                                isError: false
                            };
                        } catch (e) {
                            return { image: null, text: line, id: Date.now() + i + batchIdx + Math.random(), isError: true };
                        }
                    });

                    const newBatchScenes = await Promise.all(batchPromises);
                    setScenes(prev => [...prev, ...newBatchScenes]);
                    setGeneratedCount(prev => prev + newBatchScenes.length);
                }

                setPrompts('');
                if (scenes.length === 0) setCurrentSceneIndex(0);
                setIsLoading(false);
            };

            const togglePlay = () => {
                if (currentSceneIndex === scenes.length - 1 && progress >= 99) { setCurrentSceneIndex(0); setProgress(0); }
                setIsPlaying(!isPlaying);
            };

            const startRendering = () => {
                if (scenes.length === 0) return;
                setCurrentSceneIndex(0); setProgress(0); setIsRendering(true); setIsPlaying(false); 
                const stream = canvasRef.current.captureStream(60); 
                const options = { mimeType: 'video/webm; codecs=vp9', videoBitsPerSecond: 8000000 }; 
                try { mediaRecorderRef.current = new MediaRecorder(stream, options); } catch (e) { mediaRecorderRef.current = new MediaRecorder(stream); }
                recordedChunks.current = [];
                mediaRecorderRef.current.ondataavailable = (e) => { if (e.data.size > 0) recordedChunks.current.push(e.data); };
                mediaRecorderRef.current.onstop = () => {
                    const blob = new Blob(recordedChunks.current, { type: 'video/webm' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url; a.download = `UltraHD_Video_${Date.now()}.webm`; 
                    a.click(); window.URL.revokeObjectURL(url);
                    setIsRendering(false);
                };
                mediaRecorderRef.current.start();
            };

            const stopRendering = () => mediaRecorderRef.current?.stop();

            return (
                <div className="w-full min-h-screen flex flex-col bg-[#0f172a]">
                    <header className="border-b border-slate-700 bg-slate-800/50 backdrop-blur-md sticky top-0 z-20">
                        <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                            <div className="flex items-center gap-3 cursor-pointer" onClick={onBack}>
                                <button className="p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white transition-colors"><Icons.Home className="w-5 h-5"/></button>
                                <div className="h-6 w-[1px] bg-slate-600 mx-1"></div>
                                <div className="bg-blue-600 p-1.5 rounded-lg"><Icons.Video className="w-5 h-5 text-white" /></div>
                                <h1 className="text-lg font-bold text-white">Bulk Video Generator</h1>
                            </div>
                            <button onClick={startRendering} disabled={scenes.length === 0 || isRendering} className={`flex items-center gap-2 px-5 py-2 rounded-full text-xs font-bold tracking-wide transition-all ${isRendering ? 'bg-slate-700 text-slate-400' : 'bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20'}`}>
                                {isRendering ? <><Icons.Loader2 className="w-3 h-3 animate-spin" /> Processing...</> : <><Icons.Download className="w-4 h-4" /> Download 4K</>}
                            </button>
                        </div>
                    </header>

                    <main className="flex-1 max-w-7xl mx-auto w-full px-4 py-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
                        <div className="lg:col-span-4 space-y-6 h-[calc(100vh-100px)] overflow-y-auto custom-scrollbar pr-2">
                            <div className="glass-card rounded-2xl p-5">
                                <label className="text-xs font-bold text-slate-400 uppercase mb-3 block flex justify-between">
                                    <span>Enter Prompts (1 Line = 1 Clip)</span>
                                    <span className="text-blue-400">Free & Unlimited</span>
                                </label>
                                <textarea value={prompts} onChange={(e) => setPrompts(e.target.value)} placeholder="A futuristic car driving in rain&#10;Close up of a robotic eye" className="w-full bg-slate-900/80 border border-slate-600 rounded-xl p-4 text-sm focus:ring-2 focus:ring-blue-500 outline-none min-h-[180px] text-slate-200 placeholder:text-slate-600 resize-none" />
                                <div className="grid grid-cols-2 gap-3 mt-4">
                                    <div>
                                        <label className="text-[10px] font-bold text-slate-500 uppercase mb-1 block">Aspect Ratio</label>
                                        <select value={aspectRatio} onChange={(e) => setAspectRatio(e.target.value)} className="w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-xs text-slate-300 outline-none">
                                            <option value="16:9">16:9 (YouTube)</option><option value="9:16">9:16 (Reels)</option><option value="1:1">1:1 (Post)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="text-[10px] font-bold text-slate-500 uppercase mb-1 block">Motion Style</label>
                                        <select value={cameraMove} onChange={(e) => setCameraMove(e.target.value)} className="w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-xs text-slate-300 outline-none">
                                            <option value="cinematic">Cinematic</option><option value="zoomIn">Zoom In</option><option value="panLeft">Pan Left</option><option value="shake">Action Shake</option>
                                        </select>
                                    </div>
                                </div>
                                <button onClick={handleGenerate} disabled={isLoading || !prompts.trim()} className={`w-full mt-5 py-3 rounded-xl font-bold text-sm shadow-lg transition-all flex items-center justify-center gap-2 ${isLoading ? 'bg-slate-700 text-slate-400' : 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white'}`}>
                                    {isLoading ? <><Icons.Loader2 className="w-4 h-4 animate-spin"/> Generating...</> : "Generate Scenes"}
                                </button>
                            </div>
                            
                            {/* VERTICAL LIST (Left) */}
                            {scenes.length > 0 && (
                                <div className="glass-card rounded-2xl p-4">
                                    <div className="flex justify-between items-center mb-3">
                                        <h3 className="text-xs font-bold text-slate-400 uppercase">Timeline ({scenes.length})</h3>
                                        <button onClick={() => setScenes([])} className="p-1.5 hover:bg-red-500/20 text-red-400 rounded-lg transition-colors"><Icons.Trash2 className="w-4 h-4"/></button>
                                    </div>
                                    <div className="space-y-2 max-h-[300px] overflow-y-auto custom-scrollbar pr-1">
                                        {scenes.map((scene, idx) => (
                                            <div key={scene.id} onClick={() => { setCurrentSceneIndex(idx); setIsPlaying(false); setProgress(0); }} className={`flex items-center gap-3 p-2 rounded-xl cursor-pointer border transition-all ${currentSceneIndex === idx ? 'bg-blue-600/20 border-blue-500' : 'bg-slate-800 border-transparent hover:bg-slate-700'}`}>
                                                <div className="w-6 h-6 rounded-full bg-slate-700 flex items-center justify-center text-[10px] font-mono text-slate-300">{idx+1}</div>
                                                {scene.isError ? <span className="text-xs text-red-400 flex-1">Failed</span> : <span className="text-xs text-slate-300 flex-1 truncate">{scene.text}</span>}
                                                {scene.image && <img src={scene.image} className="w-10 h-10 rounded-lg object-cover bg-slate-900"/>}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="lg:col-span-8 h-full flex flex-col">
                            <div className="flex-1 bg-black border border-slate-700 rounded-2xl relative overflow-hidden flex items-center justify-center shadow-2xl">
                                <canvas ref={canvasRef} className="shadow-2xl" style={{ maxHeight: '100%', maxWidth: '100%', aspectRatio: aspectRatio === '16:9' ? '16/9' : aspectRatio === '9:16' ? '9/16' : '1/1' }} />
                                {isRendering && (
                                    <div className="absolute inset-0 bg-slate-900/90 z-50 flex flex-col items-center justify-center backdrop-blur-md">
                                        <Icons.Loader2 className="w-12 h-12 text-blue-500 animate-spin mb-4" />
                                        <h2 className="text-xl font-bold text-white">Rendering Video...</h2>
                                        <p className="text-slate-400 text-sm mt-2">Clip {currentSceneIndex + 1} / {scenes.length}</p>
                                    </div>
                                )}
                                {scenes.length === 0 && !isLoading && (
                                    <div className="absolute inset-0 flex flex-col items-center justify-center text-slate-600">
                                        <div className="w-20 h-20 rounded-3xl bg-slate-800/50 flex items-center justify-center mb-4 border border-slate-700"><Icons.Video className="w-10 h-10 opacity-50" /></div>
                                        <p className="text-lg font-medium">Ready to Create</p>
                                        <p className="text-sm opacity-60">Enter prompts to start</p>
                                    </div>
                                )}
                                {!isRendering && scenes.length > 0 && (
                                    <div className="absolute bottom-0 w-full p-6 bg-gradient-to-t from-black/90 via-black/50 to-transparent flex justify-center gap-6 opacity-0 hover:opacity-100 transition-opacity">
                                        <button onClick={togglePlay} className="w-14 h-14 bg-white rounded-full flex items-center justify-center text-black hover:scale-105 transition-transform shadow-lg shadow-white/20">
                                            {isPlaying ? <Icons.Pause className="w-6 h-6 fill-current"/> : <Icons.Play className="w-6 h-6 fill-current ml-1"/>}
                                        </button>
                                        <div className="absolute right-6 bottom-8">
                                            <button onClick={() => setShowCaptions(!showCaptions)} className={`p-2 rounded-lg border ${showCaptions ? 'bg-white text-black' : 'bg-black/50 text-white border-white/20'}`} title="Toggle Captions"><Icons.Type className="w-5 h-5"/></button>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* HORIZONTAL TIMELINE STRIP (Bottom of Right Panel) */}
                            {scenes.length > 0 && (
                                <div className="h-28 mt-4 relative">
                                    <div className="absolute inset-0 glass-card rounded-2xl overflow-hidden flex items-center px-4">
                                        <div className="flex gap-3 overflow-x-auto custom-scrollbar w-full pb-2 pt-2">
                                            {scenes.map((scene, idx) => (
                                                <div key={scene.id} onClick={() => { setCurrentSceneIndex(idx); setIsPlaying(false); setProgress(0); }} className={`relative h-20 min-w-[120px] rounded-xl overflow-hidden cursor-pointer border-2 transition-all flex-shrink-0 ${currentSceneIndex === idx ? 'border-blue-500 opacity-100 shadow-lg shadow-blue-500/20 scale-105 z-10' : 'border-slate-700 opacity-50 hover:opacity-80'}`}>
                                                    {scene.image && <img src={scene.image} className="w-full h-full object-cover" />}
                                                    <div className="absolute bottom-0 left-0 right-0 bg-black/70 text-[10px] px-2 py-1 truncate text-slate-300 font-medium backdrop-blur-sm">{idx+1}. {scene.text}</div>
                                                    {currentSceneIndex === idx && !isRendering && <div className="absolute bottom-0 left-0 top-0 bg-blue-500/30 border-r-2 border-blue-500 transition-all duration-75 z-20" style={{ width: `${progress}%` }}></div>}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
