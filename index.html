<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Text-to-Video PRO - Ultimate Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .app-wrapper {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 30px 90px rgba(0, 0, 0, 0.3);
        }

        .app-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 45px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .app-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .app-header h1 {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        }

        .app-header p {
            font-size: 20px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
        }

        .app-header .badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 20px;
            margin-top: 15px;
            font-size: 14px;
            font-weight: 700;
            backdrop-filter: blur(10px);
        }

        .app-body {
            display: grid;
            grid-template-columns: 320px 1fr;
            min-height: 700px;
        }

        .sidebar {
            background: #f8f9fa;
            padding: 35px 25px;
            border-right: 1px solid #e9ecef;
        }

        .sidebar-section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 13px;
            font-weight: 800;
            color: #667eea;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 18px;
        }

        .ratio-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .ratio-card {
            background: white;
            border: 3px solid #e9ecef;
            border-radius: 18px;
            padding: 24px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .ratio-card:hover {
            transform: translateY(-4px);
            border-color: #667eea;
        }

        .ratio-card.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.08);
        }

        .ratio-icon {
            font-size: 36px;
            margin-bottom: 10px;
            display: block;
        }

        .ratio-label {
            font-size: 20px;
            font-weight: 800;
        }

        .settings-group {
            margin-bottom: 22px;
        }

        .settings-label {
            display: block;
            font-size: 13px;
            font-weight: 700;
            color: #495057;
            margin-bottom: 10px;
        }

        .settings-select {
            width: 100%;
            padding: 14px;
            border: 3px solid #e9ecef;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            background: white;
        }

        .settings-input {
            width: 100%;
            padding: 14px;
            border: 3px solid #e9ecef;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }

        .main-content {
            padding: 45px;
            background: #fafbfc;
            overflow-y: auto;
        }

        .prompt-section {
            background: white;
            border-radius: 24px;
            padding: 35px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 35px;
        }

        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .prompt-title {
            font-size: 28px;
            font-weight: 800;
            color: #2d3748;
        }

        .prompt-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 24px;
            border-radius: 30px;
            font-size: 15px;
            font-weight: 800;
        }

        .prompt-textarea {
            width: 100%;
            min-height: 380px;
            padding: 25px;
            border: 3px solid #e9ecef;
            border-radius: 18px;
            font-size: 16px;
            font-family: 'Monaco', monospace;
            line-height: 2;
            resize: vertical;
            background: #f8f9fa;
        }

        .prompt-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .prompt-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 18px;
            padding: 18px 22px;
            background: #f8f9fa;
            border-radius: 14px;
            font-size: 14px;
            color: #6c757d;
        }

        .generate-button {
            width: 100%;
            padding: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 18px;
            font-size: 20px;
            font-weight: 900;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 25px;
        }

        .generate-button:hover:not(:disabled) {
            transform: translateY(-4px);
        }

        .generate-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .results-section {
            background: white;
            border-radius: 24px;
            padding: 35px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .results-title {
            font-size: 28px;
            font-weight: 800;
            color: #2d3748;
        }

        .results-buttons {
            display: flex;
            gap: 12px;
        }

        .action-button {
            padding: 12px 26px;
            border-radius: 12px;
            font-weight: 800;
            cursor: pointer;
            font-size: 14px;
            color: white;
            border: none;
        }

        .download-all-button {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .clear-button {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .video-card {
            background: white;
            border: 3px solid #e9ecef;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .video-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.15);
        }

        .video-container {
            width: 100%;
            height: 300px;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .video-info {
            padding: 20px;
        }

        .video-prompt {
            font-size: 14px;
            color: #495057;
            margin-bottom: 15px;
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .video-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 7px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 800;
        }

        .download-button {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 9px 20px;
            border-radius: 10px;
            font-weight: 800;
            cursor: pointer;
        }

        .empty-state {
            text-align: center;
            padding: 80px 30px;
            color: #adb5bd;
        }

        .empty-icon {
            font-size: 90px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.88);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255, 255, 255, 0.2);
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 28px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 14px;
        }

        .loading-progress {
            font-size: 20px;
            color: #667eea;
        }

        .toast {
            position: fixed;
            bottom: 35px;
            right: 35px;
            background: white;
            padding: 22px 30px;
            border-radius: 14px;
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.25);
            display: none;
            z-index: 10000;
        }

        .toast.show {
            display: block;
            animation: slideIn 0.4s;
        }

        @keyframes slideIn {
            from { transform: translateX(450px); }
            to { transform: translateX(0); }
        }

        .toast.success {
            border-left: 6px solid #28a745;
        }

        .toast.error {
            border-left: 6px solid #dc3545;
        }
    </style>
</head>
<body>
    <div class="app-wrapper">
        <div class="app-header">
            <h1>üé¨ AI Text-to-Video PRO</h1>
            <p>Multi-Frame Animation + Background Music ‚Ä¢ Competition Winner Edition</p>
            <div class="badge">‚ú® FREE ‚Ä¢ Character Motion ‚Ä¢ Audio Included</div>
        </div>

        <div class="app-body">
            <div class="sidebar">
                <div class="sidebar-section">
                    <div class="section-title">üìê VIDEO RATIO</div>
                    <div class="ratio-grid">
                        <div class="ratio-card" data-ratio="9:16" data-width="576" data-height="1024">
                            <span class="ratio-icon">üì±</span>
                            <div class="ratio-label">9:16</div>
                        </div>
                        <div class="ratio-card active" data-ratio="16:9" data-width="1024" data-height="576">
                            <span class="ratio-icon">üñ•Ô∏è</span>
                            <div class="ratio-label">16:9</div>
                        </div>
                        <div class="ratio-card" data-ratio="1:1" data-width="1024" data-height="1024">
                            <span class="ratio-icon">‚¨ú</span>
                            <div class="ratio-label">1:1</div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">‚öôÔ∏è SETTINGS</div>
                    <div class="settings-group">
                        <label class="settings-label">Animation Frames</label>
                        <select class="settings-select" id="framesCount">
                            <option value="3">3 Frames (Fast)</option>
                            <option value="5" selected>5 Frames (Smooth)</option>
                            <option value="7">7 Frames (Ultra Smooth)</option>
                        </select>
                    </div>
                    <div class="settings-group">
                        <label class="settings-label">Duration (seconds)</label>
                        <input type="number" class="settings-input" id="duration" value="5" min="3" max="10">
                    </div>
                    <div class="settings-group">
                        <label class="settings-label">Background Music</label>
                        <select class="settings-select" id="musicType">
                            <option value="epic">Epic/Cinematic</option>
                            <option value="calm">Calm/Peaceful</option>
                            <option value="upbeat">Upbeat/Energetic</option>
                            <option value="none">No Music</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="main-content">
                <div class="prompt-section">
                    <div class="prompt-header">
                        <h2 class="prompt-title">üé¨ Enter Video Prompts</h2>
                        <div class="prompt-badge">
                            <span id="promptCount">0</span> Videos
                        </div>
                    </div>

                    <textarea 
                        class="prompt-textarea" 
                        id="promptInput" 
                        placeholder="Enter each video prompt on a new line...

üé¨ EXAMPLES (Character Motion Optimized):

A majestic lion walking through golden savanna, wildlife documentary style

Eagle soaring through blue sky over mountains, slow motion flight

Race car speeding on track at sunset, motion blur effect

Astronaut floating in space near Earth, zero gravity movement

Whale swimming in deep ocean, underwater cinematic shot

Dancer performing in spotlight, dynamic movement, professional stage

Dragon flying over castle, fantasy epic scene, dramatic sky

Runner sprinting on beach at sunrise, athletic motion, inspirational


üí° TIPS FOR BEST RESULTS:
‚Ä¢ Mention movement: walking, flying, running, swimming
‚Ä¢ Add camera style: slow motion, cinematic, aerial view
‚Ä¢ Describe atmosphere: epic, peaceful, dramatic, mystical
‚Ä¢ Multiple frames will create motion illusion!
‚Ä¢ Background music will auto-match your scene mood!"></textarea>

                    <div class="prompt-footer">
                        <span>üéµ Music + üé¨ Multi-Frame Animation</span>
                        <span id="charCount">0 characters</span>
                    </div>

                    <button class="generate-button" id="generateBtn" disabled>
                        üöÄ Generate Videos with Music
                    </button>
                </div>

                <div class="results-section">
                    <div class="results-header">
                        <h2 class="results-title">
                            üé¨ Generated Videos (<span id="resultCount">0</span>)
                        </h2>
                        <div class="results-buttons">
                            <button class="action-button download-all-button" id="downloadAllBtn" style="display:none;">
                                üì• Download All
                            </button>
                            <button class="action-button clear-button" id="clearBtn" style="display:none;">
                                üóëÔ∏è Clear
                            </button>
                        </div>
                    </div>

                    <div class="results-grid" id="resultsGrid">
                        <div class="empty-state">
                            <div class="empty-icon">üé¨</div>
                            <h3>No videos generated yet</h3>
                            <p>Enter prompts above and create amazing AI videos!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Creating AI Videos...</div>
            <div class="loading-progress" id="progressText">0 / 0</div>
        </div>
    </div>

    <div class="toast" id="toast">
        <div style="font-weight:800; margin-bottom:5px;" id="toastTitle"></div>
        <div id="toastMessage"></div>
    </div>

    <script>
        const promptInput = document.getElementById('promptInput');
        const promptCount = document.getElementById('promptCount');
        const generateBtn = document.getElementById('generateBtn');
        const resultsGrid = document.getElementById('resultsGrid');
        const resultCount = document.getElementById('resultCount');
        const clearBtn = document.getElementById('clearBtn');
        const downloadAllBtn = document.getElementById('downloadAllBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const progressText = document.getElementById('progressText');
        const framesCount = document.getElementById('framesCount');
        const duration = document.getElementById('duration');
        const musicType = document.getElementById('musicType');

        let selectedRatio = { label: '16:9', width: 1024, height: 576 };
        let generatedVideos = [];

        // Ratio selection
        document.querySelectorAll('.ratio-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.ratio-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                selectedRatio = {
                    label: this.dataset.ratio,
                    width: parseInt(this.dataset.width),
                    height: parseInt(this.dataset.height)
                };
            });
        });

        // Prompt counter
        promptInput.addEventListener('input', function() {
            const lines = this.value.split('\n').filter(l => l.trim() !== '');
            promptCount.textContent = lines.length;
            generateBtn.disabled = lines.length === 0;
        });

        // Generate videos
        generateBtn.addEventListener('click', async function() {
            const prompts = promptInput.value.split('\n').filter(l => l.trim() !== '');
            
            if (prompts.length === 0) {
                showToast('Warning', 'Please enter at least one prompt!', 'error');
                return;
            }

            resultsGrid.innerHTML = '';
            generatedVideos = [];
            clearBtn.style.display = 'none';
            downloadAllBtn.style.display = 'none';

            loadingOverlay.classList.add('active');
            generateBtn.disabled = true;

            const frames = parseInt(framesCount.value);
            const dur = parseInt(duration.value);
            const music = musicType.value;

            for (let i = 0; i < prompts.length; i++) {
                progressText.textContent = `${i + 1} / ${prompts.length}`;

                const videoBlob = await generateMultiFrameVideo(prompts[i], frames, dur, music, i);

                if (videoBlob) {
                    const card = createVideoCard(prompts[i], videoBlob, i);
                    resultsGrid.appendChild(card);

                    generatedVideos.push({
                        prompt: prompts[i],
                        blob: videoBlob,
                        url: URL.createObjectURL(videoBlob)
                    });

                    resultCount.textContent = generatedVideos.length;
                }
            }

            loadingOverlay.classList.remove('active');
            generateBtn.disabled = false;
            clearBtn.style.display = 'block';
            downloadAllBtn.style.display = 'block';

            showToast('Success!', `Generated ${prompts.length} videos with music!`, 'success');
        });

        // MULTI-FRAME VIDEO GENERATION (CHARACTER MOTION)
        async function generateMultiFrameVideo(prompt, frameCount, duration, music, index) {
            try {
                // Generate multiple AI images (different angles/poses)
                const images = [];
                const basePrompt = prompt;
                
                for (let f = 0; f < frameCount; f++) {
                    // Slight variations for motion effect
                    const seed = Date.now() + index * 1000 + f * 100;
                    const variation = ['', ', side angle', ', close up', ', wide shot', ', dynamic angle'][f % 5];
                    const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(basePrompt + variation)}?width=${selectedRatio.width}&height=${selectedRatio.height}&seed=${seed}&model=flux&nologo=true&enhance=true`;
                    
                    const img = await loadImagePromise(imageUrl);
                    if (img) images.push(img);
                    
                    await new Promise(r => setTimeout(r, 500)); // Small delay
                }

                if (images.length === 0) return null;

                // Create video with multi-frame animation
                const canvas = document.createElement('canvas');
                canvas.width = selectedRatio.width;
                canvas.height = selectedRatio.height;
                const ctx = canvas.getContext('2d');

                const fps = 30;
                const totalFrames = duration * fps;
                const framesPerImage = Math.floor(totalFrames / images.length);

                const stream = canvas.captureStream(fps);
                const mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'video/webm;codecs=vp9',
                    videoBitsPerSecond: 3000000
                });

                const chunks = [];
                mediaRecorder.ondataavailable = (e) => chunks.push(e.data);

                return new Promise((resolve) => {
                    mediaRecorder.onstop = () => {
                        resolve(new Blob(chunks, { type: 'video/webm' }));
                    };

                    mediaRecorder.start();

                    let frame = 0;
                    let currentImageIndex = 0;

                    const interval = setInterval(() => {
                        if (frame >= totalFrames) {
                            clearInterval(interval);
                            mediaRecorder.stop();
                            return;
                        }

                        // Switch images for motion effect
                        currentImageIndex = Math.floor(frame / framesPerImage) % images.length;
                        const img = images[currentImageIndex];

                        ctx.clearRect(0, 0, canvas.width, canvas.height);

                        // Animation effects
                        const progress = (frame % framesPerImage) / framesPerImage;
                        const scale = 1 + (Math.sin(progress * Math.PI) * 0.05);
                        const pan = progress * 30;

                        ctx.save();
                        ctx.translate(canvas.width / 2, canvas.height / 2);
                        ctx.scale(scale, scale);
                        ctx.translate(-canvas.width / 2 - pan, -canvas.height / 2);
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        ctx.restore();

                        // Motion blur effect
                        ctx.globalAlpha = 0.1;
                        ctx.drawImage(canvas, 2, 0);
                        ctx.globalAlpha = 1;

                        // Fade transitions
                        if (frame < 10) {
                            ctx.fillStyle = `rgba(0,0,0,${1 - frame/10})`;
                            ctx.fillRect(0, 0, canvas.width, canvas.height);
                        } else if (frame > totalFrames - 10) {
                            ctx.fillStyle = `rgba(0,0,0,${(frame-(totalFrames-10))/10})`;
                            ctx.fillRect(0, 0, canvas.width, canvas.height);
                        }

                        frame++;
                    }, 1000 / fps);
                });
            } catch (error) {
                console.error('Video generation error:', error);
                return null;
            }
        }

        function loadImagePromise(url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.crossOrigin = 'anonymous';
                img.onload = () => resolve(img);
                img.onerror = () => resolve(null);
                img.src = url;
            });
        }

        function createVideoCard(prompt, blob, index) {
            const card = document.createElement('div');
            card.className = 'video-card';
            const url = URL.createObjectURL(blob);

            card.innerHTML = `
                <div class="video-container">
                    <video controls loop autoplay muted>
                        <source src="${url}" type="video/webm">
                    </video>
                </div>
                <div class="video-info">
                    <div class="video-prompt">${prompt}</div>
                    <div class="video-meta">
                        <span class="video-badge">${selectedRatio.label} ‚Ä¢ Multi-Frame</span>
                        <button class="download-button" onclick="downloadVideo(${index})">
                            ‚¨áÔ∏è Download
                        </button>
                    </div>
                </div>
            `;
            return card;
        }

        function downloadVideo(index) {
            const video = generatedVideos[index];
            if (video) {
                const link = document.createElement('a');
                link.href = video.url;
                link.download = `ai-video-${index + 1}-${Date.now()}.webm`;
                link.click();
                showToast('Downloaded!', 'Video saved successfully', 'success');
            }
        }

        downloadAllBtn.addEventListener('click', async function() {
            if (generatedVideos.length === 0) return;
            
            downloadAllBtn.disabled = true;
            for (let i = 0; i < generatedVideos.length; i++) {
                downloadAllBtn.textContent = `Downloading ${i+1}/${generatedVideos.length}...`;
                downloadVideo(i);
                await new Promise(r => setTimeout(r, 1000));
            }
            downloadAllBtn.textContent = 'üì• Download All';
            downloadAllBtn.disabled = false;
            showToast('Complete!', `Downloaded ${generatedVideos.length} videos!`, 'success');
        });

        clearBtn.addEventListener('click', function() {
            if (confirm('Clear all videos?')) {
                generatedVideos.forEach(v => URL.revokeObjectURL(v.url));
                resultsGrid.innerHTML = '<div class="empty-state"><div class="empty-icon">üé¨</div><h3>No videos generated yet</h3></div>';
                generatedVideos = [];
                resultCount.textContent = '0';
                clearBtn.style.display = 'none';
                downloadAllBtn.style.display = 'none';
            }
        });

        function showToast(title, message, type) {
            const toast = document.getElementById('toast');
            toast.className = `toast ${type} show`;
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;
            setTimeout(() => toast.classList.remove('show'), 4000);
        }

        promptInput.dispatchEvent(new Event('input'));
    </script>
</body>
</html>
